<?php

$(macro) {
    $(
        // "as alias" due to https://github.com/marcioAlmada/yay/issues/56
        classFunction() as alias
    )
} >> {
    [
        $(alias ... {
            $(classFunctionVisibilityModifiers ? {
                $(classFunctionVisibilityModifiers ...(,) {
                    $$(stringify($(classFunctionVisibilityModifier)))
                }),
            })
            $(classFunctionVisibilityModifiers ! {
                'no modifiers',
            })
            'function',
            $$(stringify($(classFunctionName))),
            $(classFunctionArguments ? {
                $$(stringify($(classFunctionArguments))),
            })
            $(classFunctionArguments ! {
                'no arguments',
            })
            $(classFunctionReturnType ? {
                $$(stringify($(classFunctionReturnType))),
            })
            $(classFunctionBody ? {
                $$(stringify($(classFunctionBody))),
            })
            $(classFunctionBody ! {
                'no body',
            })
        })
    ]
}

return [
    function greet() { print "hello"; },
    public static function greet(string $name = get()): ?string { print "hello {$name}"; },
];
